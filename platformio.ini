; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env:nodemcu-32s]
platform = espressif32
board = nodemcu-32s
framework = arduino

board_build.partitions = min_spiffs.csv

;lib_extra_dirs = ~/Documents/Arduino/libraries
monitor_speed = 115200
; monitor_speed = 460800
; lib_deps = 
;     ;ESP Async WebServer
;     ;ayushsharma82/AsyncElegantOTA @ ^2.2.7
;     ayushsharma82/ElegantOTA
;     ; ottowinter/ESPAsyncWebServer-esphome @ ^3.0.0
;     ;madhephaestus/Esp32WifiManager @ ^0.14.0
;     khoih-prog/ESP_WifiManager @ ^1.12.1
;     adafruit/DHT sensor library @ ^1.4.6
;     ;dallas-temperature-library
;     DallasTemperature
;     Adafruit MAX31850 OneWire
;     ; Required for MQTT
;     knolleary/PubSubClient @ ^2.8
;     ; Required for JSON handling
;     bblanchon/ArduinoJson @ ^6.18.0
;     ;nlohmann/json
;     ; jandrassy/TelnetStream
;     ; janphoffmann/AsyncTelnetSerial
  
;     me-no-dev/AsyncTCP@^1.1.1      ; must match WebServer
;     me-no-dev/ESPAsyncWebServer@^1.2.3
;     https://github.com/janphoffmann/AsyncTelnet.git
;     https://github.com/janphoffmann/AsyncTelnetSerial.git

lib_deps =
    ; hold back to the last 1.x versions that match each other
    ; me-no-dev/AsyncTCP@1.0.6
    ; me-no-dev/AsyncTCP@1.1.1
    ; me-no-dev/ESPAsyncWebServer@1.2.3

    ESP32Async/AsyncTCP@^3.3.8            ; [1] async TCP (has const status()) :contentReference[oaicite:0]{index=0}  
    ESP32Async/ESPAsyncWebServer@^3.7.4   ; [2] async webserver matching AsyncTCP :contentReference[oaicite:1]{index=1}

    ; your other depsâ€¦
    khoih-prog/ESP_WifiManager @ ^1.12.1
    ayushsharma82/ElegantOTA
    adafruit/DHT sensor library @ ^1.4.6
    DallasTemperature
    Adafruit MAX31850 OneWire
    knolleary/PubSubClient @ ^2.8
    bblanchon/ArduinoJson @ ^6.18.0

    ; async-telnet (if you still need it)
    ; https://github.com/janphoffmann/AsyncTelnet.git
    ; https://github.com/janphoffmann/AsyncTelnetSerial.git

lib_ldf_mode = deep                      ; [3] ensures all nested headers get picked up :contentReference[oaicite:2]{index=2}


build_flags=
    -DELEGANTOTA_USE_ASYNC_WEBSERVER=1

extra_scripts = pre:update_version.py

